(function(A,Liferay){var Language={};Language.get=function(key){return key};A.use("io-base",function(A){Language.get=A.cached(function(key,extraParams){var instance=this;var url=themeDisplay.getPathContext()+"/language/"+themeDisplay.getLanguageId()+"/"+key+"/";if(extraParams){if(typeof extraParams=="string"){url+=extraParams}else{if(Liferay.Util.isArray(extraParams)){url+=extraParams.join("/")}}}var headers={"X-CSRF-Token":Liferay.authToken};A.io(url,{headers:headers,method:"GET",on:{complete:function(i,o){value=o.responseText}},sync:true});return value})});Liferay.Language=Language})(AUI(),Liferay);YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"patched-v3.11.0",{requires:["yui-base"]});YUI.add("cookie",function(e,t){function h(e){throw new TypeError(e)}function p(e){(!s(e)||e==="")&&h("Cookie name must be a non-empty string.")}function d(e){(!s(e)||e==="")&&h("Subcookie name must be a non-empty string.")}var n=e.Lang,r=e.Object,i=null,s=n.isString,o=n.isObject,u=n.isUndefined,a=n.isFunction,f=encodeURIComponent,l=decodeURIComponent,c=e.config.doc;e.Cookie={_createCookieString:function(e,t,n,r){r=r||{};var i=f(e)+"="+(n?f(t):t),u=r.expires,a=r.path,l=r.domain;return o(r)&&(u instanceof Date&&(i+="; expires="+u.toUTCString()),s(a)&&a!==""&&(i+="; path="+a),s(l)&&l!==""&&(i+="; domain="+l),r.secure===!0&&(i+="; secure")),i},_createCookieHashString:function(e){o(e)||h("Cookie._createCookieHashString(): Argument must be an object.");var t=[];return r.each(e,function(e,n){!a(e)&&!u(e)&&t.push(f(n)+"="+f(String(e)))}),t.join("&")},_parseCookieHash:function(e){var t=e.split("&"),n=i,r={};if(e.length)for(var s=0,o=t.length;s<o;s++)n=t[s].split("="),r[l(n[0])]=l(n[1]);return r},_parseCookieString:function(e,t,n){var r={};if(s(e)&&e.length>0){var o=t===!1?function(e){return e}:l,a=e.split(/;\s/g),f=i,c=i,h=i;for(var p=0,d=a.length;p<d;p++){h=a[p].match(/([^=]+)=/i);if(h instanceof Array)try{f=l(h[1]),c=o(a[p].substring(h[1].length+1))}catch(v){}else f=l(a[p]),c="";!u(n)&&n.reverseCookieLoading?u(r[f])&&(r[f]=c):r[f]=c}}return r},_setDoc:function(e){c=e},exists:function(e){p(e);var t=this._parseCookieString(c.cookie,!0);return t.hasOwnProperty(e)},get:function(e,t){p(e);var n,r,s;return a(t)?(s=t,t={}):o(t)?s=t.converter:t={},n=this._parseCookieString(c.cookie,!t.raw,t),r=n[e],u(r)?i:a(s)?s(r):r},getSub:function(e,t,n,r){var s=this.getSubs(e,r);return s!==i?(d(t),u(s[t])?i:a(n)?n(s[t]):s[t]):i},getSubs:function(e,t){p(e);var n=this._parseCookieString(c.cookie,!1,t);return s(n[e])?this._parseCookieHash(n[e]):i},remove:function(t,n){return p(t),n=e.merge(n||{},{expires:new Date(0)}),this.set(t,"",n)},removeSub:function(e,t,n){p(e),d(t),n=n||{};var r=this.getSubs(e);if(o(r)&&r.hasOwnProperty(t)){delete r[t];if(!n.removeIfEmpty)return this.setSubs(e,r,n);for(var i in r)if(r.hasOwnProperty(i)&&!a(r[i])&&!u(r[i]))return this.setSubs(e,r,n);return this.remove(e,n)}return""},set:function(e,t,n){p(e),u(t)&&h("Cookie.set(): Value cannot be undefined."),n=n||{};var r=this._createCookieString(e,t,!n.raw,n);return c.cookie=r,r},setSub:function(e,t,n,r){p(e),d(t),u(n)&&h("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return o(i)||(i={}),i[t]=n,this.setSubs(e,i,r)},setSubs:function(e,t,n){p(e),o(t)||h("Cookie.setSubs(): Cookie value must be an object.");var r=this._createCookieString(e,this._createCookieHashString(t),!1,n);return c.cookie=r,r}}},"patched-v3.11.0",{requires:["yui-base"]});AUI.add("liferay-session",function(A){var Lang=A.Lang;var BUFFER_TIME=[];var CONFIG=A.config;var DOC=CONFIG.doc;var MAP_SESSION_STATE_EVENTS={active:"activated"};var SRC={};var SRC_EVENT_OBJ={src:SRC};var URL_BASE=themeDisplay.getPathMain()+"/portal/";var SessionBase=A.Component.create({ATTRS:{autoExtend:{value:false},redirectUrl:{value:""},redirectOnExpire:{value:true},sessionState:{value:"active"},sessionLength:{getter:"_getLengthInMillis",value:0},timestamp:{getter:"_getTimestamp",setter:"_setTimestamp",value:0},warningLength:{getter:"_getLengthInMillis",setter:"_setWarningLength",value:0},warningTime:{getter:"_getWarningTime",value:0}},EXTENDS:A.Base,NAME:"liferaysession",prototype:{initializer:function(config){var instance=this;instance._cookieOptions={path:"/",secure:A.UA.secure};instance._registered={};instance.set("timestamp");instance._initEvents();instance._startTimer()},registerInterval:function(fn){var instance=this;var fnId;var registered=instance._registered;if(Lang.isFunction(fn)){fnId=A.stamp(fn);registered[fnId]=fn}return fnId},resetInterval:function(){var instance=this;instance._stopTimer();instance._startTimer()},unregisterInterval:function(fnId){var instance=this;var registered=instance._registered;if(A.Object.owns(registered,fnId)){delete registered[fnId]}return fnId},expire:function(){var instance=this;instance.set("sessionState","expired",SRC_EVENT_OBJ)},extend:function(){var instance=this;instance.set("sessionState","active",SRC_EVENT_OBJ)},warn:function(){var instance=this;instance.set("sessionState","warned",SRC_EVENT_OBJ)},_afterSessionStateChange:function(event){var instance=this;var newVal=event.newVal;var src=null;if(("src" in event)&&event.details.length){src=event.details[0]}instance.fire(MAP_SESSION_STATE_EVENTS[newVal]||newVal,src)},_defActivatedFn:function(event){var instance=this;instance.set("timestamp");if(event.src==SRC){instance._getExtendIO().start()}},_defExpiredFn:function(event){var instance=this;A.clearInterval(instance._intervalId);instance.set("timestamp","expired");if(event.src===SRC){instance._getExpireIO().start()}},_getExpireIO:function(){var instance=this;var expireIO=instance._expireIO;if(!expireIO){expireIO=A.io.request(URL_BASE+"expire_session",{autoLoad:false,on:{success:function(event,id,obj){Liferay.fire("sessionExpired");if(instance.get("redirectOnExpire")){location.href=instance.get("redirectUrl")}}}});instance._expireIO=expireIO}return expireIO},_getExtendIO:function(){var instance=this;var extendIO=instance._extendIO;if(!extendIO){extendIO=A.io.request(URL_BASE+"extend_session",{autoLoad:false});instance._extendIO=extendIO}return extendIO},_getLengthInMillis:function(value){var instance=this;return value*60000},_getTimestamp:function(value){var instance=this;return A.Cookie.get(instance._cookieKey,instance._cookieOptions)||0},_getWarningTime:function(){var instance=this;return instance.get("sessionLength")-instance.get("warningLength")},_initEvents:function(){var instance=this;instance.on("sessionStateChange",instance._onSessionStateChange);instance.after("sessionStateChange",instance._afterSessionStateChange);instance.publish("activated",{defaultFn:A.bind("_defActivatedFn",instance)});instance.publish("expired",{defaultFn:A.bind("_defExpiredFn",instance)});instance.publish("warned")},_onSessionStateChange:function(event){var instance=this;var newVal=event.newVal;var prevVal=event.prevVal;if(prevVal=="expired"&&prevVal!=newVal){event.preventDefault()}else{if(prevVal=="active"&&prevVal==newVal){instance._afterSessionStateChange(event)}}},_setTimestamp:function(value){var instance=this;value=String(value||Lang.now());return A.Cookie.set(instance._cookieKey,value,instance._cookieOptions)},_setWarningLength:function(value){var instance=this;return Math.min(instance.get("sessionLength"),value)},_startTimer:function(){var instance=this;var warningTime=instance.get("warningTime");var sessionLength=instance.get("sessionLength");var registered=instance._registered;var interval=1000;instance._intervalId=A.setInterval(function(){var timeOffset;var timestamp=instance.get("timestamp");var elapsed=sessionLength;var value=parseInt(timestamp,10);if(!isNaN(value)){timeOffset=Math.floor((Date.now()-timestamp)/1000)*1000;elapsed=timeOffset}var extend=false;var isExpirationMoment=(elapsed==sessionLength);var isWarningMoment=(elapsed==warningTime);var hasExpired=(elapsed>=sessionLength);var hasWarned=(elapsed>=warningTime);var updateSessionState=true;if(hasWarned){if(isWarningMoment||isExpirationMoment){if(timestamp=="expired"){isExpirationMoment=true;hasExpired=true}else{if(instance.get("autoExtend")){extend=true;hasExpired=false;hasWarned=false;isExpirationMoment=false;isWarningMoment=false}else{if(timeOffset<warningTime){hasWarned=false;updateSessionState=false}}}}if(updateSessionState){if(isExpirationMoment){instance.expire()}else{if(isWarningMoment){instance.warn()}else{if(extend){instance.extend()}}}}}for(var i in registered){registered[i](elapsed,interval,hasWarned,hasExpired,isWarningMoment,isExpirationMoment)}},interval)},_stopTimer:function(){var instance=this;A.clearInterval(instance._intervalId)},_cookieKey:"LFR_SESSION_STATE_"+themeDisplay.getUserId()}});SessionBase.SRC=SRC;var SessionDisplay=A.Component.create({ATTRS:{pageTitle:{value:DOC.title}},EXTENDS:A.Plugin.Base,NAME:"liferaysessiondisplay",NS:"display",prototype:{initializer:function(config){var instance=this;var host=instance.get("host");if(Liferay.Util.getTop()==CONFIG.win){instance._host=host;instance._toggleText={hide:'\u0048\u0069\u0064\u0065',show:'\u0053\u0068\u006f\u0077'};instance._expiredText='\u0057\u0061\u0072\u006e\u0069\u006e\u0067\u0021\u0020\u0044\u0075\u0065\u0020\u0074\u006f\u0020\u0069\u006e\u0061\u0063\u0074\u0069\u0076\u0069\u0074\u0079\u002c\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0068\u0061\u0073\u0020\u0065\u0078\u0070\u0069\u0072\u0065\u0064\u002e\u0020\u0050\u006c\u0065\u0061\u0073\u0065\u0020\u0073\u0061\u0076\u0065\u0020\u0061\u006e\u0079\u0020\u0064\u0061\u0074\u0061\u0020\u0079\u006f\u0075\u0020\u006d\u0061\u0079\u0020\u0068\u0061\u0076\u0065\u0020\u0065\u006e\u0074\u0065\u0072\u0065\u0064\u0020\u0062\u0065\u0066\u006f\u0072\u0065\u0020\u0072\u0065\u0066\u0072\u0065\u0073\u0068\u0069\u006e\u0067\u0020\u0074\u0068\u0065\u0020\u0070\u0061\u0067\u0065\u002e';instance._extendText='\u0045\u0078\u0074\u0065\u006e\u0064';instance._warningText='\u0057\u0061\u0072\u006e\u0069\u006e\u0067\u0021\u0020\u0044\u0075\u0065\u0020\u0074\u006f\u0020\u0069\u006e\u0061\u0063\u0074\u0069\u0076\u0069\u0074\u0079\u002c\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0077\u0069\u006c\u006c\u0020\u0065\u0078\u0070\u0069\u0072\u0065\u0020\u0069\u006e\u0020\u007b\u0030\u007d\u002e\u0020\u0054\u006f\u0020\u0065\u0078\u0074\u0065\u006e\u0064\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0061\u006e\u006f\u0074\u0068\u0065\u0072\u0020\u007b\u0031\u007d\u0020\u006d\u0069\u006e\u0075\u0074\u0065\u0028\u0073\u0029\u002c\u0020\u0070\u006c\u0065\u0061\u0073\u0065\u0020\u0070\u0072\u0065\u0073\u0073\u0020\u0074\u0068\u0065\u0020\u003c\u0065\u006d\u003e\u0045\u0078\u0074\u0065\u006e\u0064\u003c\u002f\u0065\u006d\u003e\u0020\u0062\u0075\u0074\u0074\u006f\u006e\u002e';instance._warningText=Lang.sub(instance._warningText,['<span class="countdown-timer">{0}</span>',host.get("sessionLength")/60000]);host.on("sessionStateChange",instance._onHostSessionStateChange,instance);instance.afterHostMethod("_defActivatedFn",instance._afterDefActivatedFn);instance.afterHostMethod("_defExpiredFn",instance._afterDefExpiredFn)}else{host.unplug(instance)}},_afterDefActivatedFn:function(event){var instance=this;instance._uiSetActivated()},_afterDefExpiredFn:function(event){var instance=this;instance._host.unregisterInterval(instance._intervalId);instance._uiSetExpired()},_beforeHostWarned:function(event){var instance=this;var host=instance._host;var warningLength=host.get("warningLength");var remainingTime=warningLength;var banner=instance._getBanner();var counterTextNode=banner.one(".countdown-timer");instance._uiSetRemainingTime(remainingTime,counterTextNode);banner.show();instance._intervalId=host.registerInterval(function(elapsed,interval,hasWarned,hasExpired,isWarningMoment,isExpirationMoment){if(!hasWarned){instance._uiSetActivated()}else{if(!hasExpired){if(isWarningMoment){if(remainingTime<=0){remainingTime=warningLength}banner.show()}instance._uiSetRemainingTime(remainingTime,counterTextNode)}}remainingTime-=interval})},_getBanner:function(){var instance=this;var banner=instance._banner;if(!banner){banner=new Liferay.Notice({closeText:instance._extendText,content:instance._warningText,noticeClass:"popup-alert-notice",onClose:function(){instance._host.extend()},toggleText:false});instance._banner=banner}return banner},_onHostSessionStateChange:function(event){var instance=this;if(event.newVal=="warned"){instance._beforeHostWarned(event)}},_uiSetActivated:function(){var instance=this;DOC.title=instance.reset("pageTitle").get("pageTitle");instance._host.unregisterInterval(instance._intervalId);var banner=instance._getBanner();if(banner){banner.hide()}},_uiSetExpired:function(){var instance=this;var banner=instance._getBanner();banner.html(instance._expiredText);banner.replaceClass("popup-alert-notice","popup-alert-warning");banner.addClass("alert-error");banner.show();DOC.title=instance.get("pageTitle")},_uiSetRemainingTime:function(remainingTime,counterTextNode){var instance=this;var banner=instance._getBanner();counterTextNode=counterTextNode||banner.one(".countdown-timer");counterTextNode.text(instance._formatTime(remainingTime));DOC.title=banner.text()},_formatNumber:function(value){var instance=this;var floor=Math.floor;var padNumber=Lang.String.padNumber;return Lang.String.padNumber(Math.floor(value),2)},_formatTime:function(time){var instance=this;time=Number(time);if(Lang.isNumber(time)&&time>0){time/=1000;BUFFER_TIME[0]=instance._formatNumber(time/3600);time%=3600;BUFFER_TIME[1]=instance._formatNumber(time/60);time%=60;BUFFER_TIME[2]=instance._formatNumber(time);time=BUFFER_TIME.join(":")}else{time=0}return time}}});Liferay.SessionBase=SessionBase;Liferay.SessionDisplay=SessionDisplay},"",{requires:["aui-io-request","aui-timer","cookie","liferay-notice"]});YUI.add("aui-io-request",function(e,t){var n=e.Lang,r=n.isBoolean,i=n.isFunction,s=n.isString,o=e.namespace("config.io"),u=function(e){return function(){return o[e]}},a="active",f="arguments",l="autoLoad",c="cache",h="cfg",p="complete",d="content-type",v="context",m="data",g="dataType",y="",b="end",w="failure",E="form",S="get",x="headers",T="IORequest",N="json",C="method",k="responseData",L="start",A="success",O="sync",M="timeout",_="transaction",D="uri",P="xdr",H="xml",B="Parser error: IO dataType is not correctly parsing",j={all:"*/*",html:"text/html",json:"application/json, text/javascript",text:"text/plain",xml:"application/xml, text/xml"},F=e.Component.create({NAME:T,ATTRS:{autoLoad:{value:!0,validator:r},cache:{value:!0,validator:r},dataType:{setter:function(e){return(e||y).toLowerCase()},value:null,validator:s},responseData:{setter:function(e){return this._setResponseData(e)},value:null},uri:{setter:function(e){return this._parseURL(e)},value:null,validator:s},active:{value:!1,validator:r},cfg:{getter:function(){var t=this;return{arguments:t.get(f),context:t.get(v),data:t.getFormattedData(),form:t.get(E),headers:t.get(x),method:t.get(C),on:{complete:e.bind(t.fire,t,p),end:e.bind(t._end,t),failure:e.bind(t.fire,t,w),start:e.bind(t.fire,t,L),success:e.bind(t._success,t)},sync:t.get(O),timeout:t.get(M),xdr:t.get(P)}},readOnly:!0},transaction:{value:null},arguments:{valueFn:u(f)},context:{valueFn:u(v)},data:{valueFn:u(m)},form:{valueFn:u(E)},headers:{getter:function(t){var n=[],r=this,i=r.get(g);return i&&n.push(j[i]),n.push(j.all),e.merge(t,{Accept:n.join(", ")})},valueFn:u(x)},method:{valueFn:u(C)},selector:{value:null},sync:{valueFn:u(O)},timeout:{valueFn:u(M)},xdr:{valueFn:u(P)}},EXTENDS:e.Plugin.Base,prototype:{init:function(e){var t=this;F.superclass.init.apply(this,arguments),t._autoStart()},destructor:function(){var e=this;e.stop(),e.set(_,null)},getFormattedData:function(){var e=this,t=e.get(m),n=o.dataFormatter;return i(n)&&(t=n.call(e,t)),t},start:function(){var t=this;t.destructor(),t.set(a,!0);var n=t._yuiIOObj;n||(n=new e.IO,t._yuiIOObj=n);var r=n.send(t.get(D),t.get(h));t.set(_,r)},stop:function(){var e=this,t=e.get(_);t&&t.abort()},_autoStart:function(){var e=this;e.get(l)&&e.start()},_parseURL:function(e){var t=this,n=t.get(c),r=t.get(C);if(n===!1&&r==S){var s=+(new Date),u=e.replace(/(\?|&)_=.*?(&|$)/,"$1_="+s+"$2");e=u+(u==e?(e.match(/\?/)?"&":"?")+"_="+s:"")}var a=o.uriFormatter;return i(a)&&(e=a.apply(t,[e])),e},_end:function(e,t){var n=this;n.set(a,!1),n.set(_,null),n.fire(b,e,t)},_success:function(e,t,n){var r=this;r.set(k,t),r.fire(A,e,t,n)},_setResponseData:function(t){var n=null,r=this;if(t){var i=r.get(g),s=t.getResponseHeader(d)||"";if(i==H||!i&&s.indexOf(H)>=0){n=t.responseXML;if(n.documentElement.tagName=="parsererror")throw B}else n=t.responseText;n===y&&(n=null);if(i==N)try{n=e.JSON.parse(n)}catch(o){}else{var u=r.get("selector");if(n&&u){var a;n.documentElement?a=e.one(n):a=e.Node.create(n),n=a.all(u)}}}return n}}});e.IORequest=F,e.io.request=function(t,n){return new e.IORequest(e.merge(n,{uri:t}))}},"2.0.0",{requires:["io-base","json","plugin","querystring-stringify","aui-component"]});AUI.add("liferay-ajax-session",function(A){var Lang=A.Lang;var IORequest=A.Component.create({EXTENDS:A.IORequest,prototype:{initializer:function(){var instance=this;if(Liferay.Session){instance.after("complete",instance._resetSessionInterval,instance)}},_resetSessionInterval:function(event,id,obj,args){var instance=this;if(!args||(args&&(args.sessionExtend||!Lang.isBoolean(args.sessionExtend)))){Liferay.Session.resetInterval()}}}});A._IORequest=A.IORequest;A.IORequest=IORequest},"",{requires:["aui-io-request","liferay-session"]});